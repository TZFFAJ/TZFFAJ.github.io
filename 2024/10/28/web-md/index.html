<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>WEB | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Webget型     .php?a&#x3D;b   参数名&#x3D;参数值post型   请求的body部分   a&#x3D;b  参数名等于参数值空行隔开head 和 body php1.变量以$开头      $_GET(‘a’)       GET值等于前端a的值  $_POST 2.弱类型     没有具体的类型限定 -$a&#x3D;123; -$a&#x3D;”abc” -变量">
<meta property="og:type" content="article">
<meta property="og:title" content="WEB">
<meta property="og:url" content="http://example.com/2024/10/28/web-md/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Webget型     .php?a&#x3D;b   参数名&#x3D;参数值post型   请求的body部分   a&#x3D;b  参数名等于参数值空行隔开head 和 body php1.变量以$开头      $_GET(‘a’)       GET值等于前端a的值  $_POST 2.弱类型     没有具体的类型限定 -$a&#x3D;123; -$a&#x3D;”abc” -变量">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308111741_BVEMMPQSX8JS5H8.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308111804_6J7F79C99WFJVEE.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308141358_6UT7KCNTXKTW3JD.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308141358_587DXMQPB4KUZ9Q.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308141359_N3CFQUVPSXGQ3Z8.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308141400_DJB6PESX7PHHUSX.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308141401_SH2P6MVUTSC96HH.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308141401_XGA4PUVPE3B22GM.jpg">
<meta property="og:image" content="https://www.kanxue.com/upload/attach/202308/202308141402_9SP3557J3QW86FH.jpg">
<meta property="article:published_time" content="2024-10-28T12:01:35.833Z">
<meta property="article:modified_time" content="2024-10-28T12:05:19.194Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.kanxue.com/upload/attach/202308/202308111741_BVEMMPQSX8JS5H8.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-web-md" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/28/web-md/" class="article-date">
  <time class="dt-published" datetime="2024-10-28T12:01:35.833Z" itemprop="datePublished">2024-10-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      WEB
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="get型-php-a-b-参数名-参数值"><a href="#get型-php-a-b-参数名-参数值" class="headerlink" title="get型     .php?a&#x3D;b   参数名&#x3D;参数值"></a>get型     .php?a&#x3D;b   参数名&#x3D;参数值</h2><h2 id="post型-请求的body部分-a-b-参数名等于参数值"><a href="#post型-请求的body部分-a-b-参数名等于参数值" class="headerlink" title="post型   请求的body部分   a&#x3D;b  参数名等于参数值"></a>post型   请求的body部分   a&#x3D;b  参数名等于参数值</h2><p>空行隔开head 和 body</p>
<h2 id="php"><a href="#php" class="headerlink" title="php"></a>php</h2><p>1.变量以$开头     </p>
<p>$_GET(‘a’)       GET值等于前端a的值 </p>
<p>$_POST</p>
<p>2.弱类型     没有具体的类型限定</p>
<p>-$a&#x3D;123;</p>
<p>-$a&#x3D;”abc”</p>
<h3 id="变量的比较"><a href="#变量的比较" class="headerlink" title="-变量的比较"></a>-变量的比较</h3><p>&#x3D;&#x3D;与&#x3D;&#x3D;&#x3D;的区别</p>
<p>&#x3D;&#x3D;两边如果类型不同，会自动转换类型</p>
<p>&#x3D;&#x3D;&#x3D;会要求类型也是相同的</p>
<p>​	1.字符串和数字比较，字符串会被转换成数字</p>
<p>​	2.混合字符串转换成数字，看字符串的第一个</p>
<p>​	3.字符串以xex开头，x代表数字。会被转换成科学计数法。</p>
<p>​			1e9   1×10**9</p>
<p>!&#x3D;不等  松散比较</p>
<p>&lt;&gt;不等</p>
<p>&lt;&#x3D;&gt;太空船运算符</p>
<p>！&#x3D;&#x3D;不全等</p>
<table>
<thead>
<tr>
<th>$a &lt;&#x3D;&gt; $b</th>
<th>太空船运算符（组合比较符）</th>
<th>当$a小于、等于、大于 $b时 分别返回一个小于、等于、大于0的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.integer.php">int</a> 值。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>数组，类</p>
<p>其他奇葩特性</p>
<h3 id="robots-txt-爬虫协议"><a href="#robots-txt-爬虫协议" class="headerlink" title="robots.txt   爬虫协议"></a>robots.txt   爬虫协议</h3><h3 id="注释中有提示"><a href="#注释中有提示" class="headerlink" title="注释中有提示"></a>注释中有提示</h3><h3 id="vim-swap-file-1-php-swp-vim编辑器的交换文件-index-php-swp"><a href="#vim-swap-file-1-php-swp-vim编辑器的交换文件-index-php-swp" class="headerlink" title="vim swap file       .1.php.swp     vim编辑器的交换文件  index.php.swp"></a>vim swap file       .1.php.swp     vim编辑器的交换文件  index.php.swp</h3><p>编辑器非正常退出会产生临时文件</p>
<h3 id="pyc文件"><a href="#pyc文件" class="headerlink" title="pyc文件"></a>pyc文件</h3><h3 id="DC-Store"><a href="#DC-Store" class="headerlink" title=".DC_Store"></a>.DC_Store</h3><h3 id="git"><a href="#git" class="headerlink" title=".git"></a>.git</h3><p>python GitHack.py url</p>
<h3 id="backup-file"><a href="#backup-file" class="headerlink" title="backup file"></a>backup file</h3><p>web.tar.gz</p>
<p><a target="_blank" rel="noopener" href="http://www.zip/">www.zip</a></p>
<p><a target="_blank" rel="noopener" href="http://www.tar.gz/">www.tar.gz</a></p>
<p>web.rar</p>
<h3 id="index-php"><a href="#index-php" class="headerlink" title="index.php~"></a>index.php~</h3><h1 id="md5哈希函数"><a href="#md5哈希函数" class="headerlink" title="md5哈希函数"></a>md5哈希函数</h1><p>md5(  )</p>
<p>不同的输入      不同的输出</p>
<p>相同的输入      相同的输出</p>
<p>输出格式为16进制格式   0到9   a到f  </p>
<p>弱比较 md5(a)&#x3D;&#x3D;md5(b)  可以用0e绕过</p>
<p>QNKCDZO </p>
<p>240610708</p>
<p>s878926199a </p>
<p>强比较 md5(a)&#x3D;&#x3D;&#x3D;md5(b)   传入的不是字符串</p>
<p>可以用数组绕过 </p>
<p>值和md5值相等</p>
<p>$a&#x3D;&#x3D;md5($a)</p>
<p>0e215962017</p>
<h2 id="md5碰撞"><a href="#md5碰撞" class="headerlink" title="md5碰撞"></a>md5碰撞</h2><p>if ((string)$_POST[‘a’] !&#x3D;&#x3D; (string)$_POST[‘b’] &amp;&amp; md5($_POST[‘a’]) &#x3D;&#x3D;&#x3D; md5($_POST[‘b’])) {<br>    echo $flag;<br>}</p>
<p>传入的字符串化</p>
<p>$s1 &#x3D; “%af%13%76%70%82%a0%a6%58%cb%3e%23%38%c4%c6%db%8b%60%2c%bb%90%68%a0%2d%e9%47%aa%78%49%6e%0a%c0%c0%31%d3%fb%cb%82%25%92%0d%cf%61%67%64%e8%cd%7d%47%ba%0e%5d%1b%9c%1c%5c%cd%07%2d%f7%a8%2d%1d%bc%5e%2c%06%46%3a%0f%2d%4b%e9%20%1d%29%66%a4%e1%8b%7d%0c%f5%ef%97%b6%ee%48%dd%0e%09%aa%e5%4d%6a%5d%6d%75%77%72%cf%47%16%a2%06%72%71%c9%a1%8f%00%f6%9d%ee%54%27%71%be%c8%c3%8f%93%e3%52%73%73%53%a0%5f%69%ef%c3%3b%ea%ee%70%71%ae%2a%21%c8%44%d7%22%87%9f%be%79%6d%c4%61%a4%08%57%02%82%2a%ef%36%95%da%ee%13%bc%fb%7e%a3%59%45%ef%25%67%3c%e0%27%69%2b%95%77%b8%cd%dc%4f%de%73%24%e8%ab%66%74%d2%8c%68%06%80%0c%dd%74%ae%31%05%d1%15%7d%c4%5e%bc%0b%0f%21%23%a4%96%7c%17%12%d1%2b%b3%10%b7%37%60%68%d7%cb%35%5a%54%97%08%0d%54%78%49%d0%93%c3%b3%fd%1f%0b%35%11%9d%96%1d%ba%64%e0%86%ad%ef%52%98%2d%84%12%77%bb%ab%e8%64%da%a3%65%55%5d%d5%76%55%57%46%6c%89%c9%df%b2%3c%85%97%1e%f6%38%66%c9%17%22%e7%ea%c9%f5%d2%e0%14%d8%35%4f%0a%5c%34%d3%73%a5%98%f7%66%72%aa%43%e3%bd%a2%cd%62%fd%69%1d%34%30%57%52%ab%41%b1%91%65%f2%30%7f%cf%c6%a1%8c%fb%dc%c4%8f%61%a5%93%40%1a%13%d1%09%c5%e0%f7%87%5f%48%e7%d7%b3%62%04%a7%c4%cb%fd%f4%ff%cf%3b%74%28%1c%96%8e%09%73%3a%9b%a6%2f%ed%b7%99%d5%b9%05%39%95%ab”</p>
<p>$s2 &#x3D; “%af%13%76%70%82%a0%a6%58%cb%3e%23%38%c4%c6%db%8b%60%2c%bb%90%68%a0%2d%e9%47%aa%78%49%6e%0a%c0%c0%31%d3%fb%cb%82%25%92%0d%cf%61%67%64%e8%cd%7d%47%ba%0e%5d%1b%9c%1c%5c%cd%07%2d%f7%a8%2d%1d%bc%5e%2c%06%46%3a%0f%2d%4b%e9%20%1d%29%66%a4%e1%8b%7d%0c%f5%ef%97%b6%ee%48%dd%0e%09%aa%e5%4d%6a%5d%6d%75%77%72%cf%47%16%a2%06%72%71%c9%a1%8f%00%f6%9d%ee%54%27%71%be%c8%c3%8f%93%e3%52%73%73%53%a0%5f%69%ef%c3%3b%ea%ee%70%71%ae%2a%21%c8%44%d7%22%87%9f%be%79%6d%c4%61%a4%08%57%02%82%2a%ef%36%95%da%ee%13%bc%fb%7e%a3%59%45%ef%25%67%3c%e0%27%69%2b%95%77%b8%cd%dc%4f%de%73%24%e8%ab%66%74%d2%8c%68%06%80%0c%dd%74%ae%31%05%d1%15%7d%c4%5e%bc%0b%0f%21%23%a4%96%7c%17%12%d1%2b%b3%10%b7%37%60%68%d7%cb%35%5a%54%97%08%0d%54%78%49%d0%93%c3%b3%fd%1f%0b%35%11%9d%96%1d%ba%64%e0%86%ad%ef%52%98%2d%84%12%77%bb%ab%e8%64%da%a3%65%55%5d%d5%76%55%57%46%6c%89%c9%5f%b2%3c%85%97%1e%f6%38%66%c9%17%22%e7%ea%c9%f5%d2%e0%14%d8%35%4f%0a%5c%34%d3%f3%a5%98%f7%66%72%aa%43%e3%bd%a2%cd%62%fd%e9%1d%34%30%57%52%ab%41%b1%91%65%f2%30%7f%cf%c6%a1%8c%fb%dc%c4%8f%61%a5%13%40%1a%13%d1%09%c5%e0%f7%87%5f%48%e7%d7%b3%62%04%a7%c4%cb%fd%f4%ff%cf%3b%74%a8%1b%96%8e%09%73%3a%9b%a6%2f%ed%b7%99%d5%39%05%39%95%ab”</p>
<p>$s3 &#x3D; “%af%13%76%70%82%a0%a6%58%cb%3e%23%38%c4%c6%db%8b%60%2c%bb%90%68%a0%2d%e9%47%aa%78%49%6e%0a%c0%c0%31%d3%fb%cb%82%25%92%0d%cf%61%67%64%e8%cd%7d%47%ba%0e%5d%1b%9c%1c%5c%cd%07%2d%f7%a8%2d%1d%bc%5e%2c%06%46%3a%0f%2d%4b%e9%20%1d%29%66%a4%e1%8b%7d%0c%f5%ef%97%b6%ee%48%dd%0e%09%aa%e5%4d%6a%5d%6d%75%77%72%cf%47%16%a2%06%72%71%c9%a1%8f%00%f6%9d%ee%54%27%71%be%c8%c3%8f%93%e3%52%73%73%53%a0%5f%69%ef%c3%3b%ea%ee%70%71%ae%2a%21%c8%44%d7%22%87%9f%be%79%ed%c4%61%a4%08%57%02%82%2a%ef%36%95%da%ee%13%bc%fb%7e%a3%59%45%ef%25%67%3c%e0%a7%69%2b%95%77%b8%cd%dc%4f%de%73%24%e8%ab%e6%74%d2%8c%68%06%80%0c%dd%74%ae%31%05%d1%15%7d%c4%5e%bc%0b%0f%21%23%a4%16%7c%17%12%d1%2b%b3%10%b7%37%60%68%d7%cb%35%5a%54%97%08%0d%54%78%49%d0%93%c3%33%fd%1f%0b%35%11%9d%96%1d%ba%64%e0%86%ad%6f%52%98%2d%84%12%77%bb%ab%e8%64%da%a3%65%55%5d%d5%76%55%57%46%6c%89%c9%df%b2%3c%85%97%1e%f6%38%66%c9%17%22%e7%ea%c9%f5%d2%e0%14%d8%35%4f%0a%5c%34%d3%73%a5%98%f7%66%72%aa%43%e3%bd%a2%cd%62%fd%69%1d%34%30%57%52%ab%41%b1%91%65%f2%30%7f%cf%c6%a1%8c%fb%dc%c4%8f%61%a5%93%40%1a%13%d1%09%c5%e0%f7%87%5f%48%e7%d7%b3%62%04%a7%c4%cb%fd%f4%ff%cf%3b%74%28%1c%96%8e%09%73%3a%9b%a6%2f%ed%b7%99%d5%b9%05%39%95%ab”</p>
<h2 id="sha1碰撞"><a href="#sha1碰撞" class="headerlink" title="sha1碰撞"></a>sha1碰撞</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=%25PDF-1.3%0A%25%E2%E3%CF%D3%0A%0A%0A1%200%20obj%0A%3C%3C/Width%202%200%20R/Height%203%200%20R/Type%204%200%20R/Subtype%205%200%20R/Filter%206%200%20R/ColorSpace%207%200%20R/Length%208%200%20R/BitsPerComponent%208%3E%3E%0Astream%0A%FF%D8%FF%FE%00%24SHA-1%20is%20dead%21%21%21%21%21%85/%EC%09%239u%9C9%B1%A1%C6%3CL%97%E1%FF%FE%01%7FF%DC%93%A6%B6%7E%01%3B%02%9A%AA%1D%B2V%0BE%CAg%D6%88%C7%F8K%8CLy%1F%E0%2B%3D%F6%14%F8m%B1i%09%01%C5kE%C1S%0A%FE%DF%B7%608%E9rr/%E7%ADr%8F%0EI%04%E0F%C20W%0F%E9%D4%13%98%AB%E1.%F5%BC%94%2B%E35B%A4%80-%98%B5%D7%0F%2A3.%C3%7F%AC5%14%E7M%DC%0F%2C%C1%A8t%CD%0Cx0Z%21Vda0%97%89%60k%D0%BF%3F%98%CD%A8%04F%29%A1</span><br><span class="line">b=%25PDF-1.3%0A%25%E2%E3%CF%D3%0A%0A%0A1%200%20obj%0A%3C%3C/Width%202%200%20R/Height%203%200%20R/Type%204%200%20R/Subtype%205%200%20R/Filter%206%200%20R/ColorSpace%207%200%20R/Length%208%200%20R/BitsPerComponent%208%3E%3E%0Astream%0A%FF%D8%FF%FE%00%24SHA-1%20is%20dead%21%21%21%21%21%85/%EC%09%239u%9C9%B1%A1%C6%3CL%97%E1%FF%FE%01sF%DC%91f%B6%7E%11%8F%02%9A%B6%21%B2V%0F%F9%CAg%CC%A8%C7%F8%5B%A8Ly%03%0C%2B%3D%E2%18%F8m%B3%A9%09%01%D5%DFE%C1O%26%FE%DF%B3%DC8%E9j%C2/%E7%BDr%8F%0EE%BC%E0F%D2%3CW%0F%EB%14%13%98%BBU.%F5%A0%A8%2B%E31%FE%A4%807%B8%B5%D7%1F%0E3.%DF%93%AC5%00%EBM%DC%0D%EC%C1%A8dy%0Cx%2Cv%21V%60%DD0%97%91%D0k%D0%AF%3F%98%CD%A4%BCF%29%B1</span><br></pre></td></tr></table></figure>

<h2 id="数组，类"><a href="#数组，类" class="headerlink" title="数组，类"></a>数组，类</h2><p>许多函数输出并非数组</p>
<p>强行输入会返回特殊结果</p>
<p>用数组绕过</p>
<h1 id="strcmp（-a-b）"><a href="#strcmp（-a-b）" class="headerlink" title="strcmp（$a,$b）"></a>strcmp（$a,$b）</h1><p>a和b相等  输出0</p>
<h3 id="extract函数"><a href="#extract函数" class="headerlink" title="extract函数"></a>extract函数</h3><p>能把数组转换成变量名和变量值的声明</p>
<h3 id="file-gei-contents-…-函数"><a href="#file-gei-contents-…-函数" class="headerlink" title="file_gei_contents($….)函数"></a>file_gei_contents($….)函数</h3><h3 id="传的是文件名，将文件提取出来"><a href="#传的是文件名，将文件提取出来" class="headerlink" title="传的是文件名，将文件提取出来"></a>传的是文件名，将文件提取出来</h3><h3 id="trim（）函数"><a href="#trim（）函数" class="headerlink" title="trim（）函数"></a>trim（）函数</h3><p>将首尾的空格去掉</p>
<h3 id="传空值-2-10"><a href="#传空值-2-10" class="headerlink" title="传空值    2.10"></a>传空值    2.10</h3><h2 id="strpos（-a-’b’）"><a href="#strpos（-a-’b’）" class="headerlink" title="strpos（$_a,’b’）"></a>strpos（$_a,’b’）</h2><p>在a中查找，a中是否存在b</p>
<h2 id="preg-正则表达式"><a href="#preg-正则表达式" class="headerlink" title="preg 正则表达式"></a>preg 正则表达式</h2><p>模式分隔符后的”i”标记这是一个大小写不敏感的搜索    </p>
<p>&#x2F;* 模式中的\b标记一个单词边界，所以只有独立的单词”web”会被匹配，而不会匹配<br> * 单词的部分内容比如”webbing” 或 “cobweb” *&#x2F;</p>
<p>​		     if (preg_match(<strong>“&#x2F;\bweb\b&#x2F;i”</strong>, “PHP is the web scripting language of choice.”))                </p>
<p>preg(‘^[a-zA-Z0-9]+$’,$_GET[‘passwrod’])</p>
<p>^开头    $结尾            后面传入的字符串匹配前面限定的字符串格式  符合true   不符合false</p>
<table>
<thead>
<tr>
<th>$</th>
<th>匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 ‘\n’ 或 ‘\r’。要匹配 $ 字符本身，请使用 $。</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th>^</th>
<th>匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 ^ 字符本身，请使用 ^</th>
</tr>
</thead>
</table>
<h4 id="空格-这四个都可以被处理为"><a href="#空格-这四个都可以被处理为" class="headerlink" title="[ (空格) + 　 . 这四个都可以被处理为_"></a>[ (空格) + 　 . 这四个都可以被处理为_</h4><h2 id="die输出并退出脚本"><a href="#die输出并退出脚本" class="headerlink" title="die输出并退出脚本"></a>die输出并退出脚本</h2><h3 id="只能用字符串，想能不能数组绕过"><a href="#只能用字符串，想能不能数组绕过" class="headerlink" title="只能用字符串，想能不能数组绕过"></a>只能用字符串，想能不能数组绕过</h3><h3 id="遇到数组-null"><a href="#遇到数组-null" class="headerlink" title="遇到数组    null"></a>遇到数组    null</h3><h2 id="‘abc-0’-字符串终结"><a href="#‘abc-0’-字符串终结" class="headerlink" title="‘abc&#x2F;0’   字符串终结"></a>‘abc&#x2F;0’   字符串终结</h2><h3 id="php中-123-00"><a href="#php中-123-00" class="headerlink" title="php中   123%00"></a>php中   123%00</h3><p>ereg只看到%00，可以用%00绕过</p>
<p>trpos可以看到%00后面，不可以只用%00</p>
<p>3083</p>
<h2 id="23"><a href="#23" class="headerlink" title="#   %23"></a>#   %23</h2><h2 id="strlen（）计算字符串长度"><a href="#strlen（）计算字符串长度" class="headerlink" title="strlen（）计算字符串长度"></a>strlen（）计算字符串长度</h2><h1 id="数据库基本结构"><a href="#数据库基本结构" class="headerlink" title="数据库基本结构"></a>数据库基本结构</h1><h1 id="数据库基本结构-1"><a href="#数据库基本结构-1" class="headerlink" title="数据库基本结构"></a>数据库基本结构</h1><ul>
<li>库             A学校    B学校</li>
<li>表             1班  2班</li>
<li>列             学号  姓名  成绩</li>
<li>数据         101  张三   60分</li>
</ul>
<p>要明确数据所在的库，表，列</p>
<p>以select开头选择数据    列     from    库中的表    where   条件判断子句</p>
<h2 id="union可以连接连个select语句-两个select语句的列数相同"><a href="#union可以连接连个select语句-两个select语句的列数相同" class="headerlink" title="union可以连接连个select语句     两个select语句的列数相同"></a>union可以连接连个select语句     两个select语句的列数相同</h2><h4 id="order-by-1，2，3，4，5，6…"><a href="#order-by-1，2，3，4，5，6…" class="headerlink" title="order by  1，2，3，4，5，6…."></a>order by  1，2，3，4，5，6….</h4><p>按第几列排序</p>
<h1 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h1><p><img src="https://www.kanxue.com/upload/attach/202308/202308111741_BVEMMPQSX8JS5H8.jpg"></p>
<p>篡改了SQL语句原本逻辑</p>
<p>     $id &#x3D; 1 and 1&#x3D;1</p>
<p>     $id &#x3D; 1 and 1&#x3D;0                                          判断会不会被带入到数据库执行</p>
<p>​																			union前后的select语句列数相同</p>
<p>​	$id&#x3D;1 order by 123….. </p>
<p>判断注入位点</p>
<p>判断select列数</p>
<p>库名</p>
<p>表名</p>
<p>列名</p>
<p>结果</p>
<ul>
<li><h1 id="联合注入"><a href="#联合注入" class="headerlink" title="联合注入"></a>联合注入</h1></li>
<li><p>最方便的注入方式    </p>
</li>
<li><p>union语句可以填充查询结果，并且额外执行一次查询</p>
<ul>
<li><p>有回显，可以看到某些字段的回显结果（通常）</p>
</li>
<li><p>过程</p>
<p>​	猜解出字段数目</p>
<p>​	猜测表名，字段名</p>
<p>​	注入得到结果</p>
</li>
</ul>
</li>
</ul>
<p>猜数据库</p>
<h1 id="1-整数型"><a href="#1-整数型" class="headerlink" title="1.整数型"></a>1.整数型</h1><h3 id="database"><a href="#database" class="headerlink" title="database"></a>database</h3><p>select  *  from *** where id&#x3D;1 </p>
<h2 id="1-库名"><a href="#1-库名" class="headerlink" title="1.库名"></a>1.库名</h2><h2 id="union-select-1-2-database"><a href="#union-select-1-2-database" class="headerlink" title="union select 1,2,database()"></a>union select 1,2,database()</h2><p>database()当前数据库</p>
<p>看所有库名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1 &#x27;union select 1,group_concat(schema_name),3 from information_schema.schemata</span><br></pre></td></tr></table></figure>

<h3 id="2-表名"><a href="#2-表名" class="headerlink" title="2.表名"></a>2.表名</h3><h3 id="table-group-concat-能把查询到的所有表名结果合并成一行显示"><a href="#table-group-concat-能把查询到的所有表名结果合并成一行显示" class="headerlink" title="table                group_concat()能把查询到的所有表名结果合并成一行显示"></a>table                group_concat()能把查询到的所有表名结果合并成一行显示</h3><p>所有的表，列，database在information_schema库中存放</p>
<p>所有表的信息在information_schema库的tables表中存放</p>
<p>select table_name from information_schema.tables where table_schema&#x3D;database()  &#x2F;  ‘数据库名’ </p>
<p>select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()  &#x2F;  ‘数据库名’ </p>
<p>​         </p>
<p>1’ union select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()#</p>
<h3 id="3-列名"><a href="#3-列名" class="headerlink" title="3.列名"></a>3.列名</h3><h3 id="column"><a href="#column" class="headerlink" title="column"></a>column</h3><p>列的信息存放在information_schema.columns表中</p>
<p>select column_name from information_schema.columns where table_name&#x3D;’表名’</p>
<p>​         </p>
<p>select group_concat(column_name) from information_schema.columns where table_name&#x3D;’表名’ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; union select group_concat(column_name) from information_schema.columns where table_name=&quot;flag&quot;#</span><br></pre></td></tr></table></figure>



<h3 id="4-result"><a href="#4-result" class="headerlink" title="4.result"></a>4.result</h3><p>select   列名       from    库名.表名     </p>
<p>select     1,2,flag     from      ctf.answer  或者   直接  answer</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; union select group_concat(flag) from flag#</span><br></pre></td></tr></table></figure>

<h1 id="2-字符型"><a href="#2-字符型" class="headerlink" title="2.字符型"></a>2.字符型</h1><p>用户输入被引号包裹</p>
<p>闭合前引号</p>
<p>注释后引号   # 或者   –（空格）</p>
<p>例如     $sql&#x3D;”SELECT*FROM users WHERE <strong>id&#x3D;’$id’</strong>  LIMIT  0,1”</p>
<h3 id="SQL注入过程"><a href="#SQL注入过程" class="headerlink" title="SQL注入过程"></a>SQL注入过程</h3><p>库名: id&#x3D;0’ union select 1,2,database()#    井号是%23</p>
<p>表名: id&#x3D;0’ union select 1,2,group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()#</p>
<p>列名: id&#x3D;0’ union select 1,2,group_concat(column_name) from information_schema.columns where table_name&#x3D;’answer’#</p>
<h1 id="SQL注入-布尔盲注"><a href="#SQL注入-布尔盲注" class="headerlink" title="SQL注入-布尔盲注"></a>SQL注入-布尔盲注</h1><p>在没有数据回显的情况下，可以存在不同的页面内容回显  </p>
<p>通常逐个爆破猜解，效率偏低</p>
<p>思路：利用回显的不同推测SQL语句执行的结果是True还是False</p>
<p>Payload: select * from users where id&#x3D;’1’ and (select length(database())&#x3D;1)#</p>
<p>判断数据库名称长度是否等于1</p>
<h2 id="SQL注入-布尔盲注过程"><a href="#SQL注入-布尔盲注过程" class="headerlink" title="SQL注入-布尔盲注过程"></a>SQL注入-布尔盲注过程</h2><p>left(a,b)从左侧截取 a 的前 b 位：left(database(),1)&gt;’s’</p>
<p>substr(a,b,c)从 b 位置开始，截取字符串 a 的 c 长度       </p>
<p>substr((select database()),2,1)    如果是abc     从b开始截取1    得b</p>
<p>mid(a,b,c)从位置 b 开始，截取 a 字符串的 c 位</p>
<p>ascii() 将某个字符转换为 ascii 值：ascii(substr(user),1,1))&#x3D;101#</p>
<p>ascii（substr((select database()),2,1) ）</p>
<h2 id="SQL注入-布尔盲注脚本编写"><a href="#SQL注入-布尔盲注脚本编写" class="headerlink" title="SQL注入-布尔盲注脚本编写"></a>SQL注入-布尔盲注脚本编写</h2><p><img src="https://www.kanxue.com/upload/attach/202308/202308111804_6J7F79C99WFJVEE.jpg"></p>
<p>python中</p>
<p>chr（a）   表示ascll码转字符</p>
<h1 id="PHP反序列化"><a href="#PHP反序列化" class="headerlink" title="PHP反序列化"></a>PHP反序列化</h1><p>序列化：将PHP对象压缩并按照一定格式转换成字符串过程</p>
<p>反序列化：从字符串转换回PHP对象的过程</p>
<p>目的：为了方便PHP对象的传输和储存</p>
<p>serialize（）序列化     输入对象，输出字符串</p>
<p>unserialize（）反序列化    输入字符串，输出对象</p>
<p>unserialize()接受的参数用户可控，传入构造的字符串，实现攻击</p>
<p>只序列化属性，不序列化方法</p>
<p>只能控制对象的属性，不能控制方法</p>
<h4 id="1-要寻找到合适的能被我们控制的属性，2-利用本身存在的方法"><a href="#1-要寻找到合适的能被我们控制的属性，2-利用本身存在的方法" class="headerlink" title="1.要寻找到合适的能被我们控制的属性，2.利用本身存在的方法"></a>1.要寻找到合适的能被我们控制的属性，2.利用本身存在的方法</h4><p>构造函数，析构函数</p>
<p>以_ _开头</p>
<p>•(1)construct()：当对象创建时会自动调用(但在unserialize()时是不会自动调用的)。 </p>
<p>•(2)wakeup() ：unserialize()时会自动调用. 当对象所包含的属性数&lt;-&gt;不一致 </p>
<p>•(3)destruct()：当对象被销毁时会自动调用。 </p>
<p>•(4)toString():当反序列化后的对象被输出在模板中的时候（转换成字符串的时候）自动调用</p>
<h3 id="construct"><a href="#construct" class="headerlink" title="__construct()"></a>__construct()</h3><p>当一个对象被实例化</p>
<p><img src="https://www.kanxue.com/upload/attach/202308/202308141358_6UT7KCNTXKTW3JD.jpg"></p>
<h3 id="destruct"><a href="#destruct" class="headerlink" title="_destruct()"></a>_destruct()</h3><p>当一个对象内存空间被回收时自动调用 </p>
<p><img src="https://www.kanxue.com/upload/attach/202308/202308141358_587DXMQPB4KUZ9Q.jpg"></p>
<h3 id="sleep"><a href="#sleep" class="headerlink" title="__sleep()"></a>__sleep()</h3><p>序列化时自动调用</p>
<p><img src="https://www.kanxue.com/upload/attach/202308/202308141359_N3CFQUVPSXGQ3Z8.jpg"></p>
<h3 id="wakeup"><a href="#wakeup" class="headerlink" title="__wakeup()"></a>__wakeup()</h3><p>反序列化时自动调用</p>
<p>看起来调用了一个对象</p>
<p>不会调用construct</p>
<p><img src="https://www.kanxue.com/upload/attach/202308/202308141400_DJB6PESX7PHHUSX.jpg"></p>
<h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="__toString()"></a>__toString()</h3><p>将一个对象当字符串使用时</p>
<p><img src="https://www.kanxue.com/upload/attach/202308/202308141401_SH2P6MVUTSC96HH.jpg"></p>
<h3 id="invoke"><a href="#invoke" class="headerlink" title="__invoke()"></a>__invoke()</h3><p>把对象当函数使用时调用</p>
<p><img src="https://www.kanxue.com/upload/attach/202308/202308141401_XGA4PUVPE3B22GM.jpg"></p>
<h3 id="call"><a href="#call" class="headerlink" title="__call()"></a>__call()</h3><p>当调用一个方法不存在时，调用call</p>
<p>call接受两个参数   调用的不存在的方法名和接收的参数</p>
<p><img src="https://www.kanxue.com/upload/attach/202308/202308141402_9SP3557J3QW86FH.jpg"></p>
<h3 id="反序列化中常用的魔术方法-2-17"><a href="#反序列化中常用的魔术方法-2-17" class="headerlink" title="反序列化中常用的魔术方法                    2.17"></a>反序列化中常用的魔术方法                    2.17</h3><p>•__construct()  --  __destruct() </p>
<p>•__call() </p>
<p>•__sleep()        --    __wakeup() </p>
<p>•__invoke() </p>
<p>•__toString()</p>
<h1 id="O-6-”Person”-3-s-8-”username”-s-4-”john”-s-6-”-00-00age”-i-20-s-12-”-00Person-00isOK”-b-0"><a href="#O-6-”Person”-3-s-8-”username”-s-4-”john”-s-6-”-00-00age”-i-20-s-12-”-00Person-00isOK”-b-0" class="headerlink" title="O:6:”Person”:3:{s:8:”username”;s:4:”john”;s:6:”%00*%00age”;i:20;s:12:”%00Person%00isOK”;b:0;}"></a>O:6:”Person”:3:{s:8:”username”;s:4:”john”;s:6:”%00*%00age”;i:20;s:12:”%00Person%00isOK”;b:0;}</h1><h3 id="O-类名长度-类名-属性个数-s-属性名长度-属性名-s-属性值长度-属性值-…"><a href="#O-类名长度-类名-属性个数-s-属性名长度-属性名-s-属性值长度-属性值-…" class="headerlink" title="O:类名长度:类名:属性个数:{s:属性名长度:属性名;s:属性值长度:属性值;…}"></a>O:类名长度:类名:属性个数:{s:属性名长度:属性名;s:属性值长度:属性值;…}</h3><h1 id="文件上传漏洞"><a href="#文件上传漏洞" class="headerlink" title="文件上传漏洞"></a>文件上传漏洞</h1><p> 用户上传一个可执行的脚本文件，获得了执行服务器端命令的能力</p>
<p>getshell最为常用，直接的方式</p>
<p>文件上传本身是一个正常的业务需求，问题在于如何安全的上传</p>
<h2 id="文件头绕过"><a href="#文件头绕过" class="headerlink" title="文件头绕过"></a>文件头绕过</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GIF89a </span><br></pre></td></tr></table></figure>

<p>在一句话木马前加上GIF89a</p>
<h2 id="触发条件"><a href="#触发条件" class="headerlink" title="触发条件"></a>触发条件</h2><p>·用户能够从web网页<strong>访问</strong>到被上传的文件（直接或间接）</p>
<p>·上传的文件被web容器解释执行 </p>
<p>·用户上传的文件通常不能被网站程序压缩，修改内容</p>
<h2 id="直接上传一句话-2-18"><a href="#直接上传一句话-2-18" class="headerlink" title="直接上传一句话                                                2.18"></a>直接上传一句话                                                2.18</h2><p>很多上传点依赖于对访问上传页面的访问权限控制</p>
<p>一旦上传页面暴露，直接就可以getshell </p>
<h1 id="防御文件上传"><a href="#防御文件上传" class="headerlink" title="防御文件上传"></a>防御文件上传</h1><h2 id="客户端javascript"><a href="#客户端javascript" class="headerlink" title="客户端javascript"></a>客户端javascript</h2><p>在浏览加载文件，但还未点击上传按钮是变弹出对话框</p>
<p>内容如：只允许上传jpg.&#x2F;.jpeg&#x2F;.png后缀名的文件</p>
<p>而此时并没有发送数据包</p>
<p>抓包改包轻松绕过</p>
<h2 id="检测MIME类型"><a href="#检测MIME类型" class="headerlink" title="检测MIME类型"></a>检测MIME类型</h2><p>发送上传请求时浏览器判断文件类型，在请求包中增加mimetype属性，标注这是一个图片文件等</p>
<p>客户端判断：$FILES[‘myfile’][‘type’】&#x3D;&#x3D; ‘image&#x2F;jpeg’</p>
<p>抓包改包</p>
<p><strong>Content-Type:</strong>     改成允许的type形式</p>
<h2 id="检查内容"><a href="#检查内容" class="headerlink" title="检查内容"></a>检查内容</h2><p>看上去很有效，但是，只要是黑名单方法，就不那么可靠</p>
<p>白名单方法，只要检验的逻辑过于简单，也不可靠</p>
<h2 id="隐藏路径"><a href="#隐藏路径" class="headerlink" title="隐藏路径"></a>隐藏路径</h2><p>移到一个不为人知的路径</p>
<p>受到业务需求的限制，比如头像必须要被访问到</p>
<h2 id="随机文件名"><a href="#随机文件名" class="headerlink" title="随机文件名"></a>随机文件名</h2><p>受到业务需求的限制，比如头像必须要被访问到</p>
<h2 id="检查文件扩展名"><a href="#检查文件扩展名" class="headerlink" title="检查文件扩展名"></a>检查文件扩展名</h2><p>最直接有效的方法</p>
<p>web服务器根据文件扩展名来选择不同的方式解析</p>
<p>想办法上传能被服务器解析的扩展名</p>
<p>可以使用白名单和黑名单</p>
<h2 id="黑名单"><a href="#黑名单" class="headerlink" title="黑名单"></a>黑名单</h2><p>判断扩展名是不是.php</p>
<p>可以用 php3,php5,phtml,PHP,pHp,phtm     大小写绕过     尾留空  ，  . </p>
<p>都可以被服务器识别</p>
<h2 id="白名单"><a href="#白名单" class="headerlink" title="白名单"></a>白名单</h2><h3 id="配合文件包含漏洞"><a href="#配合文件包含漏洞" class="headerlink" title="配合文件包含漏洞"></a>配合文件包含漏洞</h3><h3 id="截断绕过"><a href="#截断绕过" class="headerlink" title="截断绕过"></a>截断绕过</h3><p>利用中间键的某些漏洞或者php中固有的一些漏洞</p>
<p>test.php%00.jpg</p>
<p>对于%00这样的终结字符串字符处理不佳，可能会忽略掉php或者jpg</p>
<h3 id="IIS5-x-6-x解析漏洞"><a href="#IIS5-x-6-x解析漏洞" class="headerlink" title="IIS5.x-6.x解析漏洞"></a>IIS5.x-6.x解析漏洞</h3><p>使用iis5.x-6.x版本的服务器，大多为windows server 2003</p>
<p>网站比较古老，开发语句一般为asp</p>
<p>该解析漏洞也只能解析asp文件，而不能解析aspx文件</p>
<p><a target="_blank" rel="noopener" href="http://www.abc.com/xx.asp;.jpg">www.abc.com/xx.asp;.jpg</a></p>
<p>服务器默认不解析；号后面的内容，</p>
<p>因此xx.asp；.jpg便被解析成asp文件（xx.asp；.jpg为上传文件）</p>
<h2 id="apache解析漏洞"><a href="#apache解析漏洞" class="headerlink" title="apache解析漏洞"></a>apache解析漏洞</h2><p>Apache解析文件的规则是从右到左开始判断解析</p>
<p>如果后缀名为不可识别文件解析，就再向左判断</p>
<p>test.php.owf.rar </p>
<h2 id="nginx解析漏洞"><a href="#nginx解析漏洞" class="headerlink" title="nginx解析漏洞"></a>nginx解析漏洞</h2><p>cgi.fix_pathinfo开启时（为1）</p>
<p>当访问<a target="_blank" rel="noopener" href="http://www.xx.com/phpinfo.jpg">www.xx.com/phpinfo.jpg</a> 1.php时，会将phpinfo.jpg当成php进行解析</p>
<p>其中1.php是一个不存在的文件</p>
<h3 id="PHP的配置文件结合文件上传漏洞"><a href="#PHP的配置文件结合文件上传漏洞" class="headerlink" title="PHP的配置文件结合文件上传漏洞"></a>PHP的配置文件结合文件上传漏洞</h3><p>PHP的配置文件包括：<br>php.ini</p>
<p>httpd.conf</p>
<h2 id="htaccess"><a href="#htaccess" class="headerlink" title=".htaccess"></a>.htaccess</h2><p>文件定义了url重写，自定义错误界面，访问控制权限等功能</p>
<p>在AllowOverride为ALL的情况下可以使用</p>
<h4 id="上传目录禁止外部访问，或脚本不解析的时候，可以尝试修改-htaccess"><a href="#上传目录禁止外部访问，或脚本不解析的时候，可以尝试修改-htaccess" class="headerlink" title="上传目录禁止外部访问，或脚本不解析的时候，可以尝试修改.htaccess"></a>上传目录禁止外部访问，或脚本不解析的时候，可以尝试修改.htaccess</h4><p>通过上传.htaccess，重写apache配置</p>
<p>当遇到文件名可控，但禁止上传php文件的时候，可以通过修改.htaccess将其他扩展名也用作php解析</p>
<p>AddType  application&#x2F;x-httpd-php  .jpg</p>
<p>将.jpg赋给application&#x2F;x-httpd-php这个php文件</p>
<h2 id="user-ini"><a href="#user-ini" class="headerlink" title=".user.ini"></a>.user.ini</h2><p>是一个可以被自定义的php.ini</p>
<p>能够用的是PHP_INI_PERDIR,PHP_INI_USER属性的设置</p>
<p>设置了.user.ini后无需重启中间件，只需等待一段时间，即可被自动加载</p>
<h4 id="user-ini-使用总结"><a href="#user-ini-使用总结" class="headerlink" title=".user.ini 使用总结"></a>.user.ini 使用总结</h4><p>网站包含文件上传点，但不允许上传php文件</p>
<p>先上传一个.user.ini</p>
<p>再上传一个图片马</p>
<p>然后访问当前目录下的任意一个PHP文件，即可使用 </p>
<p><strong>有趣的PHP_INI_PERDIR设置</strong></p>
<p>auto_prepend_file在页面顶部加载文件</p>
<p>auto_append_file在页面底部加载文件</p>
<p>如auto_prepend_file&#x3D;123.gif</p>
<p>即会在每个PHP文件加载的开头自动加载123.gif里的内容</p>
<h2 id="配合服务器解析漏洞"><a href="#配合服务器解析漏洞" class="headerlink" title="配合服务器解析漏洞"></a>配合服务器解析漏洞</h2><h1 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h1><p>将外部文件的内容引入当前环境：#include&lt;stdio.h&gt;</p>
<p>include</p>
<p>require</p>
<p>include_once</p>
<p>require_once</p>
<p>highlight_file</p>
<p>show_source</p>
<p>readfile</p>
<p>file_get_contents</p>
<p>fopen</p>
<p>file</p>
<p>可控时</p>
<h2 id="php文件包含"><a href="#php文件包含" class="headerlink" title="php文件包含"></a>php文件包含</h2><p>1.内容是php，解析执行</p>
<p>2.内容普通文本，读取到文件内容</p>
<p><code>&lt;?php include($_GET[&#39;file&#39;]);?&gt;</code></p>
<p>包括本地文件包含（LFI）  填入的是本地文件名   </p>
<p>1.PHP  sowrcvce</p>
<p>2.服务器上要有相应文件</p>
<p>和远程文件包含（RFI）      </p>
<h3 id="PHP伪协议"><a href="#PHP伪协议" class="headerlink" title="PHP伪协议"></a>PHP伪协议</h3><h3 id="•file-协议"><a href="#•file-协议" class="headerlink" title="•file:&#x2F;&#x2F;协议"></a>•file:&#x2F;&#x2F;协议</h3><p>•用于访问本地文件系统，在CTF中通常用来读取本地文件</p>
<p>•使用方法： </p>
<p>•file:&#x2F;&#x2F; [文件的绝对路径和文件名] </p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/cmd.php%EF%BC%9Ffile=file://D:/soft/phpStudy/WWW/phpcode.txt">http://127.0.0.1/cmd.php？file=file://D:/soft/phpStudy/WWW/phpcode.txt</a></p>
<p>file在包含的函数中，文件被包含</p>
<h3 id="•php-input协议"><a href="#•php-input协议" class="headerlink" title="•php:&#x2F;&#x2F;input协议"></a>•php:&#x2F;&#x2F;input协议</h3><p>•可以访问请求的原始数据的只读流。即可以直接读取到POST上没有经过解析的原始数据。 </p>
<p>•用于执行php代码</p>
<p>将post当做的内容当做文件包含的结果</p>
<h3 id="•phar-伪协议"><a href="#•phar-伪协议" class="headerlink" title="•phar:&#x2F;&#x2F;伪协议"></a>•phar:&#x2F;&#x2F;伪协议</h3><p>•这个参数是就是php解压缩包的一个函数，不管后缀是什么，都会当做<strong>压缩包</strong>来解压。</p>
<h4 id="•用法：-file-phar-压缩包-内部文件"><a href="#•用法：-file-phar-压缩包-内部文件" class="headerlink" title="•用法：?file&#x3D;phar:&#x2F;&#x2F;压缩包&#x2F;内部文件"></a>•用法：?file&#x3D;phar:&#x2F;&#x2F;压缩包&#x2F;内部文件</h4><p>                   phar:&#x2F;&#x2F;xxx.png&#x2F;shell.php</p>
<p>​									<strong>虽然是png拓展名，但还是当压缩包</strong>  继续读取压缩包中的某php文件</p>
<h3 id="•zip-伪协议"><a href="#•zip-伪协议" class="headerlink" title="•zip:&#x2F;&#x2F;伪协议"></a>•zip:&#x2F;&#x2F;伪协议</h3><p>•zip伪协议和phar协议类似，但是用法不一样。 •</p>
<p>•使用方法： </p>
<p>•?file&#x3D;zip:&#x2F;&#x2F;[xxx] <strong>#</strong> [压缩文件内的子文件名]   </p>
<p>          zip:&#x2F;&#x2F;xxx.png#shell.php。</p>
<h3 id="•php-filter（本地磁盘文件进行读取）"><a href="#•php-filter（本地磁盘文件进行读取）" class="headerlink" title="•php:&#x2F;&#x2F;filter（本地磁盘文件进行读取）"></a>•php:&#x2F;&#x2F;filter（本地磁盘文件进行读取）</h3><p>•元封装器，设计用于”数据流打开”时的”<strong>筛选过滤”</strong>应用，对本地磁盘文件进行读写。</p>
<p> •使用方法： </p>
<p>•?filename&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;xxx.php </p>
<p>•?filename&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;xxx.php</p>
<p>如果要php源代码读取，php:&#x2F;&#x2F;filter为协议base64加密</p>
<p>​	</p>
<h3 id="•data-text-plain-文件内容-字符串"><a href="#•data-text-plain-文件内容-字符串" class="headerlink" title="•data:&#x2F;&#x2F;text&#x2F;plain   文件内容 字符串"></a>•data:&#x2F;&#x2F;text&#x2F;plain   文件内容 字符串</h3><p>data:&#x2F;&#x2F;text&#x2F;plain,<strong>string</strong></p>
<h1 id="命令注入"><a href="#命令注入" class="headerlink" title="命令注入"></a>命令注入</h1><h2 id="OWASP-TOP-10"><a href="#OWASP-TOP-10" class="headerlink" title="OWASP TOP 10"></a>OWASP TOP 10</h2><p>OWASP开放应用安全项目组织</p>
<p>命令执行漏洞</p>
<p>命令注入</p>
<p>代码执行</p>
<p>RCE</p>
<p>Remote Command Exec远程命令执行</p>
<p>Remote Code Exec远程代码执行</p>
<p><code>%0a换行符  绕过</code></p>
<p><code>paste   /   rev   命令 可以读文件</code></p>
<p><code>mysql -uroot -proot -e &quot;show databases;&quot;</code></p>
<p><code>mysql -uroot -proot -e &quot;use PHP_CMS;show tables;&quot;</code></p>
<p><code>mysql -uroot -proot -e &quot;use PHP_CMS;SELECT * FROM F1ag_Se3Re7;&quot;</code></p>
<p>shell</p>
<p>getshe</p>
<p>webshell</p>
<p>终端（terminal）是通过向用户提供接口来访问shell程序</p>
<p>文件描述符</p>
<p>0表示标准输入</p>
<p>1表示标准输出</p>
<p>2表示标准错误</p>
<p>&amp;&amp; 第一个命令失败，不执行第二条命令</p>
<p>||是或    第一个失败才执行第二条命令</p>
<p>|管道符，第一个命令的输出是第二个命令的输入，即不显示第一条的输出</p>
<p>&amp;  后台执行，都执行</p>
<p>重定向</p>
<p>输出重定向 &gt;</p>
<p>输入重定向 &lt;</p>
<h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><?php  开始标记

?><p>结束标记</p>
<?=   是<?php echo的简写，不能执行太多    <?= '  ';

<%  %>   <%=

<script language ="php">         </script>

?><p>结束标记相当于隐含了一个；，最后一行时可以省去；</p>
<p>有时候不要最后；，在include中….</p>
<h4 id="script标签"><a href="#script标签" class="headerlink" title="script标签"></a>script标签</h4><script language="php">system("id"); </script>

<h4 id="魔术常量-有九个"><a href="#魔术常量-有九个" class="headerlink" title="魔术常量  有九个"></a>魔术常量  有九个</h4><p>（_ _File _ _） 文件的完整路径和文件名</p>
<p>预定义常量</p>
<h4 id="PHP-EOL-当前换行符"><a href="#PHP-EOL-当前换行符" class="headerlink" title="PHP_EOL  当前换行符"></a>PHP_EOL  当前换行符</h4><p>\r 回车换行        \n</p>
<h4 id="超全局变量"><a href="#超全局变量" class="headerlink" title="超全局变量"></a>超全局变量</h4><p>$_GET</p>
<p>$_POST</p>
<p>$_COOKIE</p>
<p>$_SESSION</p>
<p>$_FILES</p>
<h4 id="SERVER"><a href="#SERVER" class="headerlink" title="$_SERVER"></a>$_SERVER</h4><p><em><strong>*$_SERVE[‘PHP_SELF’]*</strong></em> 读取的是当前执行脚本的文件名，意思就是读取文件夹下的一个文件</p>
<p>$_SERVER[‘REQUEST_URI’]是取得当前URL的 路径地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">案例网址：https://www.shawroot.cc/php/index.php/test/foo?username=root</span><br><span class="line">$_SERVER[&#x27;PHP_SELF&#x27;] 	得到：/php/index.php/test/foo</span><br><span class="line">$_SERVER[&#x27;REQUEST_URI&#x27;] 得到：/php/index.php/test/foo?username=root</span><br></pre></td></tr></table></figure>



<blockquote>
<p><code>$_SERVER[&#39;REQUEST_URI&#39;]</code>不会将参数中的特殊符号进行转换，<br><strong>也就是说它获取到的url上面的值，不会进行url解码</strong></p>
</blockquote>
<h4 id="basename"><a href="#basename" class="headerlink" title="basename()"></a>basename()</h4><p>返回路径中的文件名部分</p>
<p><strong>利用的点：如果传入的参数中出现了非ascii字符则会把它给丢弃</strong></p>
<h4 id="mb-substr"><a href="#mb-substr" class="headerlink" title="mb_substr()"></a><em>mb_substr</em>()</h4><p>截断</p>
<h4 id="mb-strpos"><a href="#mb-strpos" class="headerlink" title="mb_strpos()"></a><em>mb_strpos</em>()</h4><p><em>则是查找第一次出现的位置</em></p>
<h3 id="空格绕过"><a href="#空格绕过" class="headerlink" title="空格绕过"></a>空格绕过</h3><p>$IFS</p>
<p>${IFS}</p>
<p>$IFS$9</p>
<p><code>$IFS$9</code>可避免避免变量名连用，也不出现花括号</p>
<p>%0a换行符  绕过</p>
<p>%09</p>
<p>&#96;&#96;</p>
<p>$abc&#x3D;\n</p>
<p>${abc}file   避免变量名有歧义</p>
<p>大括号扩展</p>
<p>{1,2,3}扩展成1 2 3</p>
<p>cat&lt; &#x2F;etc&#x2F;passward</p>
<p>cat&lt;&gt;&#x2F;etc&#x2F;passwd</p>
<p># 十六进制 X&#x3D;a&#x3D;$’cat\x20&#x2F;etc&#x2F;passwd’;$a</p>
<p> 换行符 x&#x3D;a&#x3D;$’cat\n&#x2F;etc&#x2F;passwd’;$a</p>
<p>​			 x&#x3D;a&#x3D;$’cat\t&#x2F;etc&#x2F;passwd’;$a</p>
<p>环境变量                </p>
<p>自定义变量</p>
<p>set  显示所有变量，包含bash函数</p>
<h3 id="9-是当前命令的第九个参数-位置参数"><a href="#9-是当前命令的第九个参数-位置参数" class="headerlink" title="$9 是当前命令的第九个参数      位置参数"></a>$9 是当前命令的第九个参数      位置参数</h3><h3 id="whoami当前用户用户名"><a href="#whoami当前用户用户名" class="headerlink" title="whoami当前用户用户名"></a>whoami当前用户用户名</h3><p>‘ ‘字符串不执行</p>
<p>“ “字符串变量执行</p>
<p>$’    ‘</p>
<p>a&#x3D;$’cat\x20&#x2F;etc&#x2F;password’；转义</p>
<p>变量拼接</p>
<p>a&#x3D;f;b&#x3D;lag;cat $a$b      cat  flag</p>
<p>ca${u}t  f${u}lag</p>
<p>未初始化的变量   为null</p>
<p>eval（）当成php代码执行</p>
<p>$string&#x3D;footable</p>
<p>preg_match（’&#x2F;foo&#x2F;‘,$string）对字符串规则匹配。如果找到一个匹配，preg_match() 函数返回 1，否则返回 0。还有一个可选的第三参数可以让你把匹配的部分存在一个数组中。在验证数据时这个功能可以变得非常有用。</p>
<p>cookie是一种存储在用户计算机上的小文件，用于跟踪和识别用户。它们通常用于存储用户的偏好设置、登录信息、购物车内容等，以提供更个性化的用户体验。Cookie可以通过网站设置，然后在用户访问该网站时发送给服务器。</p>
<p>?url&#x3D;system(“ls &#x2F;“);</p>
<p> 代码层面，通过正则匹配黑名单，禁止使用部分函数          绕过关键字 </p>
<p>php配置中禁用函数，disable_function</p>
<p>?&gt;&lt;?&#x3D;&#96;c’’at &#x2F;flag ‘;</p>
<p>&#96;命令执行</p>
<h3 id="set-error-handler函数："><a href="#set-error-handler函数：" class="headerlink" title="set_error_handler函数："></a>set_error_handler函数：</h3><p>当前脚本发生错误时调用</p>
<p>substr函数进行截断第一个字符</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/28/web-md/" data-id="cm2sz39vz0001ak52h9b73nfl" data-title="WEB" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2024/10/27/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/10/28/web-md/">WEB</a>
          </li>
        
          <li>
            <a href="/2024/10/27/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>